# Production Environment Configuration
# This file contains production-specific environment variables
# It can be committed to version control as it contains no secrets
# Real secrets MUST be provided via environment variables or secret management

# =============================================================================
# PRODUCTION ENVIRONMENT
# =============================================================================

NODE_ENV=production

# =============================================================================
# API CONFIGURATION
# =============================================================================

# Port Configuration
API_EXTERNAL_PORT=3000
API_INTERNAL_PORT=3000
HOST=0.0.0.0
API_BASE_URL=https://api.yourdomain.com

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# Use environment variable override for real production database
MONGODB_URI=mongodb://mongo:27017/bb-db
DATABASE_NAME=bb-db
DB_MAX_POOL_SIZE=20
DB_SERVER_SELECTION_TIMEOUT=10000
DB_SOCKET_TIMEOUT=60000

# =============================================================================
# FRONTEND CONFIGURATION
# =============================================================================

# Port Configuration
FRONTEND_EXTERNAL_PORT=80
FRONTEND_INTERNAL_PORT=80
FRONTEND_HOST=0.0.0.0
VITE_API_URL=https://api.yourdomain.com
CHOKIDAR_USEPOLLING=false

# =============================================================================
# DOCKER CONFIGURATION
# =============================================================================

AUTO_SEED=false
RESTART_POLICY=unless-stopped

# =============================================================================
# SCALING CONFIGURATION
# =============================================================================

# Service Replicas
API_REPLICAS=2
FRONTEND_REPLICAS=2
MONGO_REPLICAS=1

# Resource Limits - API Service
API_CPU_LIMIT=1.0
API_MEMORY_LIMIT=512M
API_CPU_RESERVATION=0.25
API_MEMORY_RESERVATION=128M

# Resource Limits - Frontend Service
FRONTEND_CPU_LIMIT=0.5
FRONTEND_MEMORY_LIMIT=256M
FRONTEND_CPU_RESERVATION=0.1
FRONTEND_MEMORY_RESERVATION=64M

# Resource Limits - MongoDB Service
MONGO_CPU_LIMIT=1.0
MONGO_MEMORY_LIMIT=1G
MONGO_CPU_RESERVATION=0.5
MONGO_MEMORY_RESERVATION=512M

# Deployment Configuration
DEPLOY_RESTART_CONDITION=on-failure
DEPLOY_RESTART_DELAY=5s
DEPLOY_MAX_ATTEMPTS=3
DEPLOY_RESTART_WINDOW=120s

# Update Configuration
DEPLOY_UPDATE_PARALLELISM=1
DEPLOY_UPDATE_DELAY=10s
DEPLOY_UPDATE_FAILURE_ACTION=rollback
DEPLOY_UPDATE_MONITOR=60s
DEPLOY_UPDATE_MAX_FAILURE_RATIO=0.3
DEPLOY_UPDATE_ORDER=stop-first

# Rollback Configuration
DEPLOY_ROLLBACK_PARALLELISM=1
DEPLOY_ROLLBACK_DELAY=0s
DEPLOY_ROLLBACK_FAILURE_ACTION=pause
DEPLOY_ROLLBACK_MONITOR=60s
DEPLOY_ROLLBACK_MAX_FAILURE_RATIO=0.3
DEPLOY_ROLLBACK_ORDER=stop-first

# MongoDB Placement
MONGO_PLACEMENT_CONSTRAINT=node.role == manager

# =============================================================================
# NETWORK CONFIGURATION
# =============================================================================

# Network Driver Configuration
NETWORK_DRIVER=bridge
NETWORK_BRIDGE_NAME=basketball-br0
NETWORK_ENABLE_ICC=true
NETWORK_ENABLE_IP_MASQUERADE=true
NETWORK_MTU=1500

# IPAM Configuration
IPAM_DRIVER=default
NETWORK_SUBNET=172.20.0.0/16
NETWORK_GATEWAY=172.20.0.1

# =============================================================================
# LOAD BALANCER CONFIGURATION
# =============================================================================

# Load Balancer Ports
LB_HTTP_PORT=80
LB_HTTPS_PORT=443
LB_STATUS_PORT=8080

# Load Balancer Scaling
LB_REPLICAS=1
LB_CPU_LIMIT=0.5
LB_MEMORY_LIMIT=256M
LB_CPU_RESERVATION=0.1
LB_MEMORY_RESERVATION=64M

# SSL Configuration
SSL_CERT_PATH=./ssl

# Compose Version
COMPOSE_VERSION=1.0

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

LOG_LEVEL=warn
ENABLE_REQUEST_LOGGING=false
LOG_MAX_SIZE=100m
LOG_MAX_FILES=10

# =============================================================================
# HEALTH CHECK CONFIGURATION
# =============================================================================

HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=15
HEALTH_CHECK_RETRIES=5
HEALTH_CHECK_START_PERIOD=120

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

CORS_ORIGINS=https://yourdomain.com,https://www.yourdomain.com
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60000

# Production secrets (MUST be overridden by environment variables)
# These are placeholder values that MUST be replaced in production
SESSION_SECRET=REPLACE_WITH_SECURE_SESSION_SECRET
JWT_SECRET=REPLACE_WITH_SECURE_JWT_SECRET